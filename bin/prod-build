#!/usr/bin/env bash

set -Eeuo pipefail

rm -rf target && mkdir target
echo Generating target/index.html for mbrainz schema...
# When Netlify updates their version of Clojure https://github.com/netlify/build-image/pull/484
# this can become
# clojure -X:cli standalone \
#         '{:sources    [{:file/name "resources/mbrainz-schema.edn"}
#                        {:file/name "resources/mbrainz-enums.edn"}
#                        {:file/name "resources/mbrainz-supplemental.edn"}]
#          :output-path "target/index.html"}'
#
# And the :netlify alias can be removed.
#
# Until the, use this outdated invocation style:
clojure -A:netlify -m ingest.projects.mbrainz
echo Generated target/index.html for mbrainz schema
